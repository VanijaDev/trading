// Conditions:
// ✅ two candles
// ✅ candles of opposite directions (one bullish, another bearish or vise versa)
// ✅ the total size of the second candle must be bigger than the first one
// - the side of the closing for the first candle & opening for the second must contain no tails or maximum 10% of it's candle body. Example: closing side is top if the first candle is bullish, bottom - is the first candle is bearish
// - this pattern must be marked with the red arrow above the second candle.
// - second candle size must be > than the past 100 candles average size
// - it must be on top (last 20 candles)
// - better UI marker

//@version=6
indicator("Reinforced Engulfing Pattern", overlay=true, shorttitle="2C Bigger")

// --- Minimal pattern per request ---
// Conditions:
// - two candles
// - opposite directions (one bullish, another bearish)
// - total size (high-low) of the second candle > total size of the first candle

// Condition 1: Candle directions
bullPrev = close[1] > open[1]
bearPrev = close[1] < open[1]
bullCur = close > open
bearCur = close < open

// Opposite directions between the two candles
oppositeDir = (bullPrev and bearCur) or (bearPrev and bullCur)

// Condition 2: Candle total ranges
rangePrev = high[1] - low[1]
rangeCur = high - low

// Second candle range must be larger than the first
secondLarger = rangeCur > rangePrev

// Final pattern condition
pattern = oppositeDir and secondLarger

// Plot a red arrow above the second candle when the pattern occurs
plotshape(pattern, title="Two Candles, no tails", location=location.abovebar, style=shape.arrowdown, color=color.red, size=size.tiny, text="2C")

// Alert when the pattern forms on the current bar
alertcondition(pattern, title="Two Candles, no tails", message="Two-candle opposite pattern: second candle larger than first")